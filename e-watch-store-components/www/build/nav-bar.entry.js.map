{"file":"nav-bar.entry.esm.js","mappings":"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","names":[],"sources":["src/components/nav-bar/nav-bar.css?tag=nav-bar&encapsulation=shadow","src/components/nav-bar/nav-bar.tsx"],"sourcesContent":["@import '~bootstrap-icons/font/bootstrap-icons.css';\r\n\r\n.nav-elements div {\r\n    border: 1px solid gray;\r\n    border-radius: 2px;\r\n    color: white;\r\n    margin: 0;\r\n    margin-right: 15px;\r\n    padding: 5px;\r\n    cursor: pointer;\r\n}\r\n\r\n.nav-elements div:hover {\r\n    background-color: rgb(151, 13, 13);\r\n}\r\n\r\n.nav-elements {\r\n    display: flex;\r\n    justify-content: end;\r\n    align-items: center;\r\n}\r\n\r\n.nav-elements h4 {\r\n    margin-right: 12px;\r\n}","import { Component, h, State, Listen } from '@stencil/core';\r\nimport { users_endpoint } from '../../interfaces/endpoints';\r\n\r\n@Component({\r\n    tag: 'nav-bar',\r\n    styleUrl: 'nav-bar.css',\r\n    shadow: true\r\n})\r\nexport class NavBar {\r\n    @State() isLoggedIn: boolean = localStorage.getItem('useremail')?.length > 0 || localStorage.getItem('adminemail')?.length > 0;\r\n    @State() userName: string = '';\r\n    @State() isAdmin: boolean = localStorage.getItem('adminemail') == 'admin@gmail.com';\r\n    @State() cartItemCount: number = 0;\r\n\r\n    componentWillLoad() {\r\n        if (this.isLoggedIn) {\r\n            this.fetchUserName();\r\n        }\r\n        this.updateCartItemCount();\r\n    }\r\n\r\n    @Listen('cartItemCountUpdated', { target: 'body' })\r\n    cartItemCountUpdatedHandler(event: CustomEvent<number>) {\r\n        this.cartItemCount = event.detail;\r\n    }\r\n\r\n    async fetchUserName() {\r\n        try {\r\n            const useremail = localStorage.getItem('useremail');\r\n            const adminusername = localStorage.getItem('adminusername');\r\n            if (adminusername) {\r\n                this.userName = adminusername;\r\n                return;\r\n            }\r\n\r\n            const response = await fetch(`${users_endpoint}`);\r\n            const users = await response.json();\r\n            const user = users.find(user => user.email === useremail);\r\n            if (user) {\r\n                this.userName = user.username;\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching user:', error);\r\n        }\r\n    }\r\n\r\n    async updateCartItemCount() {\r\n        const userEmail = localStorage.getItem('useremail');\r\n        if (!userEmail) {\r\n            const tempCart = JSON.parse(localStorage.getItem('tempCart') || '[]');\r\n            this.cartItemCount = tempCart.length;\r\n        } else {\r\n            try {\r\n                const response = await fetch(`${users_endpoint}`);\r\n                const users = await response.json();\r\n                const currentUser = users.find(user => user.email === userEmail);\r\n                if (currentUser && currentUser.cart) {\r\n                    this.cartItemCount = currentUser.cart.length;\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching user data:', error);\r\n            }\r\n        }\r\n    }\r\n\r\n    logoutClick(event: Event) {\r\n        event.preventDefault();\r\n        console.log('Logout clicked');\r\n        localStorage.clear();\r\n        location.href = '/home';\r\n        this.isLoggedIn = false;\r\n    }\r\n\r\n    homeClick(event: Event) {\r\n        event.preventDefault();\r\n        console.log('Home clicked');\r\n        location.href = '/home';\r\n    }\r\n\r\n    cartClick(event: Event) {\r\n        event.preventDefault();\r\n        console.log('Cart clicked');\r\n        location.href = '/cart';\r\n    }\r\n\r\n    adminPanel(event: Event) {\r\n        event.preventDefault();\r\n        console.log('Admin Panel clicked');\r\n        location.href = '/admin-dashboard';\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div class=\"nav-elements\">\r\n                <h4>{this.isLoggedIn ? `Welcome, ${this.userName || localStorage.getItem('useremail')}` : ''}</h4>\r\n                {!this.isAdmin ? (<div onClick={this.homeClick.bind(this)}>Home</div>) : ''}\r\n                {this.isAdmin ? <div onClick={this.adminPanel.bind(this)}>Admin Panel</div> :\r\n                    <div onClick={this.cartClick.bind(this)}>\r\n                        <i class=\"bi bi-cart4\"></i> <sup>{this.cartItemCount}</sup>\r\n                    </div>\r\n                }\r\n                {this.isLoggedIn ? (\r\n                    <div onClick={this.logoutClick.bind(this)}>Logout <i class=\"bi bi-power\"></i></div>\r\n                ) : (\r\n                    <div onClick={(event: Event) => { event.preventDefault(); location.href = '/login' }}>Login</div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"],"version":3}