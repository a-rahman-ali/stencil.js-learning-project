{"file":"signup-component.entry.esm.js","mappings":"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","names":[],"sources":["src/components/signup-component/signup-component.css?tag=signup-component&encapsulation=shadow","src/components/signup-component/signup-component.tsx"],"sourcesContent":[":host {\r\n    display: block;\r\n}\r\n\r\n.heading {\r\n    font-size: 30px;\r\n    font-weight: 600;\r\n    margin-bottom: 20px;\r\n    margin-top: 2px;\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n    color: white;\r\n    text-align: center;\r\n    background-color: #000000;\r\n    padding: 10px 10px;\r\n    border-radius: 10px;\r\n}\r\n\r\n.form-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin-top: 15%;\r\n}\r\n\r\n.login-container,\r\n.signup-container {\r\n    border: 2px solid #000000;\r\n    padding: 13px 13px;\r\n    width: 400px;\r\n    border-radius: 2%;\r\n}\r\n\r\nbutton :disabled {\r\n    background-color: grey;\r\n    color: black;\r\n    cursor: not-allowed;\r\n}\r\n\r\n.login-btn {\r\n    border: none;\r\n    background-color: black;\r\n    color: white;\r\n    padding: 10px 20px;\r\n    text-align: center;\r\n    font-weight: bold;\r\n    border-radius: 5px;\r\n    width: 50%;\r\n    margin-left: 30%;\r\n}\r\n\r\n.login-btn:hover {\r\n    background-color: rgb(80, 80, 80);\r\n    color: white;\r\n}\r\n\r\n.inputfield {\r\n    width: 100%;\r\n    margin-top: 10px;\r\n    margin-bottom: 15px;\r\n    height: 30px;\r\n}\r\n\r\n.dt {\r\n    font-weight: bolder;\r\n    align-items: center;\r\n}\r\n\r\ndd {\r\n    margin-top: 10px;\r\n}\r\n\r\n.userexists {\r\n    color: red;\r\n    font-weight: bolder;\r\n    font-size: 20px;\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n    /* display: flex; */\r\n    justify-content: center;\r\n    display: none;\r\n}\r\n\r\n.userexists-true {\r\n    display: flex;\r\n}\r\n\r\n.login-title {\r\n    font-size: 30px;\r\n    font-weight: 600;\r\n    margin-bottom: 20px;\r\n    margin-top: 2px;\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n    text-align: center;\r\n    padding: 10px 10px;\r\n    border-radius: 10px;\r\n}\r\n\r\nform p {\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n    display: flex;\r\n    justify-content: center;\r\n}","import { Component, State, h } from \"@stencil/core\";\r\nimport { users_endpoint } from \"../../interfaces/endpoints\";\r\n\r\n@Component({\r\n    tag: 'signup-component',\r\n    styleUrl: 'signup-component.css',\r\n    shadow: true\r\n})\r\nexport class SignupComponent {\r\n\r\n    @State() username: string = '';\r\n    @State() email: string = '';\r\n    @State() password: string = '';\r\n    @State() userExists: boolean = false;\r\n    @State() cart: any[] = [];\r\n\r\n    handleUsernameChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        this.username = target.value;\r\n    }\r\n\r\n    handleEmailChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        this.email = target.value;\r\n    }\r\n\r\n    handlePasswordChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        this.password = target.value;\r\n    }\r\n\r\n    loginClick(event: Event) {\r\n        event.preventDefault();\r\n        console.log('loginClicked');\r\n        location.href = '/login';\r\n    }\r\n\r\n    async signup(event: Event) {\r\n        event.preventDefault();\r\n        try {\r\n            const response = await fetch(`${users_endpoint}`);\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            const users = await response.json();\r\n            console.log('Fetched users:', users);\r\n\r\n            const userExists = users.some((u: { email: string }) => u.email === this.email);\r\n\r\n            if (userExists) {\r\n                console.log('User already exists');\r\n                this.userExists = true;\r\n                setTimeout(() => {\r\n                    this.userExists = false;\r\n                }, 3000)\r\n            } else {\r\n                const newUserId = users.length > 0 ? (users[users.length - 1].id) + 1 : 1;\r\n                const newUser = {\r\n                    id: newUserId,\r\n                    username: this.username,\r\n                    email: this.email,\r\n                    password: this.password,\r\n                    cart: this.cart\r\n                };\r\n\r\n                const postResponse = await fetch(`${users_endpoint}`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify(newUser)\r\n                });\r\n\r\n                if (!postResponse.ok) {\r\n                    throw new Error(`HTTP error! status: ${postResponse.status}`);\r\n                }\r\n                alert(\"Registered successfully\");\r\n                console.log('User successfully created');\r\n                location.href = '/login';\r\n            }\r\n        } catch (error) {\r\n            console.error('An error occurred during signup:', error);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let signupDiv = '';\r\n        signupDiv = (\r\n            <div class=\"login-form\">\r\n                <header-component></header-component>\r\n                <h4 class={`userexists ${this.userExists ? 'userexists-true' : 'userexists'}`} id=\"existsmessage\">User Already Exists</h4>\r\n                <div class=\"form-container\">\r\n                    <form class=\"signup-container\" onSubmit={this.signup.bind(this)}>\r\n                        <h3 class=\"login-title\">User Signup</h3>\r\n                        <dl>\r\n                            <dt class=\"dt\">User Name</dt>\r\n                            <input type=\"text\" required class=\"inputfield\" id=\"username\" value={this.username} onInput={this.handleUsernameChange.bind(this)} />\r\n                            <span id=\"usernamemsg\"></span>\r\n                            <dt class=\"dt\">Email</dt>\r\n                            <input type=\"email\" required class=\"inputfield\" id=\"email\" value={this.email} onInput={this.handleEmailChange.bind(this)} />\r\n                            <span id=\"emailmsg\"></span>\r\n                            <dt class=\"dt\">Password</dt>\r\n                            <input type=\"password\" required class=\"inputfield\" id=\"password\" value={this.password} onInput={this.handlePasswordChange.bind(this)} />\r\n                            <span id=\"pwdmsg\"></span>\r\n                        </dl>\r\n                        <button class=\"login-btn\" type=\"submit\">Sign up</button>\r\n                        <p>Already have an account? &nbsp; <a href='' onClick={this.loginClick.bind(this)}>Login</a></p>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n        return signupDiv;\r\n    }\r\n}"],"version":3}